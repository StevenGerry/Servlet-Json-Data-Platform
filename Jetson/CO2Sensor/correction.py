#   補正式実施モジュール
#   CorrectionListに[センサーID、CO2傾き、CO2切片、温度切片、湿度切片]の順で記載
#   CO2補正式       (x - CO2切片) / (CO2傾き）
#   温度補正式      (x - 温度切片)
#   湿度補正式      (x - 湿度切片）
#       センサーID下4桁     整数
#       CO2傾き            浮動小数点                
#       CO2切片            浮動小数点
#       温度補正式         浮動小数点
#       湿度補正式         浮動小数点 
#                       
#   補正式は適宜更新されるため、更新したら次に履歴を記載
# 
#   2021-07-06      新規作成（Y.Takai）
#   2021-07-18      温度・湿度補正を加える（Y.Takai）

CorrectionList = [
    [1977,1.00918145160794,53.5073859397617,0,0],
    [1987,0.999841024692312,1.08748688188664,2.15655166245793,-4.18794567700819],
    [1988,-0.628401150523269,-2.42301052207397,2.55298588564215,-5.58231920972538],
    [2047,0.999593349328619,1.00091996397199,2.1869737900988,-4.50380798599546],
    [2152,0.999237933796995,1.04279273891801,2.71137528559408,-5.68578663119289],
    [2242,0.988689735708583,29.852811028921,2.41918529040407,-5.13894218975467],
    [2243,0.998660128351829,1.09056370997384,2.13215498737377,-4.79402656024535],
    [2244,0.999512926967563,0.983583967120724,1.70112184343437,-3.26007452501208],
    [2261,0.958573637296339,17.8719395626857,0,0],
    [2722,0.955433284435751,-23.9642217576048,1.75448213360716,-2.1295909842472],
    [3992,1.02227149177807,10.2979887547201,2.22190773809527,-4.41343987493973],
    [4001,0.960963407771346,-25.5258648637258,1.78537515031266,-3.38782971079861],
    [4005,1.00529243072673,57.7722594431691,2.25242034932662,-4.48670917508414],
    [4006,0.929139623327139,2.29299544814379,2.37008635461762,-4.88092409211169],
    [4011,0.984386039146471,0.792092445002481,2.17546212121213,-4.52964656986528],
    [4012,0.989365715433898,68.3783671753101,2.21476094276098,-4.10547897126022],
    [4015,0.999479235049975,1.07438429529481,2.39483149951902,-4.78864536736418],
    [4045,1.00780743984984,51.577150987781,2.22790955687833,-4.4240387055073],
    [4049,0.998824862547279,1.12801302020386,2.25982085738339,-5.53996906565654],
    [4050,0.999660912538074,1.04878356317636,2.4427532617845,-5.29810153619532],
    [4067,0.952556530990427,8.81475525547569,2.11120380892256,-4.30712274531022],
    [4309,0.980021011890917,-0.279072881745378,2.33151674020426,-4.80848891386395],
    [5338,0.999790587232185,1.09821867816097,2.31235491822994,-4.52168483137223],
    [5339,0.999587551364946,1.07610451652839,2.2699295183983,-4.71391743326122],
    [5344,0.99938471614494,1.04992037699538,2.15592316017319,-4.31618420815299],
    [5351,0,0,2.24602149817779,-4.77735171657045],
    [5356,0.99962691758038,0.998223449399218,2.43071748737374,-4.96500006012497],
    [5394,1.01065893957804,125.371748117014,2.154280738937,-4.45753905122644],
    [5395,0.961128542301565,16.7306306800281,2.29653678150553,-5.69113323713325],
    [5399,0.999490015258852,1.10393374774148,2.01741856060604,-4.08402659030779],
    [5475,0.999717950656836,1.04674238294328,2.43858572330447,-5.16903152056279],
    [5479,0.998503163946891,1.10351486469047,2.26741645622899,-4.45092657227019],
    [5791,1.01205744004109,35.7562657407492,0,0],
    [7491,1.02105172975739,49.2777619059927,0,0],
    [7502,0.999622256528159,1.18254142224889,2.0235961099086,-4.2188575487013],
    [7503,1.0141388236328,50.6018263381783,2.21902822871577,-4.0427646103895],
    [7510,0.890090542849646,-238.904584011159,1.97043734968734,-3.77357315716693],
    [7521,0.999758635371575,1.05030687521193,2.73062984006738,-5.6121620520683],
    [7522,1.03375602679324,67.3362201523115,2.20515277777778,-4.39199365680619],
    [7537,0.99953898034403,0.883758718956311,2.16728437650314,-4.97100871813375],
    [7541,1.00340086993858,50.4981327715882,2.29681836219338,-4.67412760040887],
    [7545,0.999872968065299,82.4397161548718,2.62281439393941,-5.74176363335742],
    [7549,1.00102793521784,34.2962320672416,2.50500333694083,-5.52817389670508],
    [7593,0.999338857921813,1.08963091215666,2.48750012025012,-5.03570203523321],
    [7601,0.99910013758438,0.868955189517867,2.27285290404044,-4.84088096741226],
    [7609,0.999735797413374,0.991794036951663,2.70454888629891,-6.07512755300252],
    [7643,0.999683906580362,1.20228957577011,2.51639416601916,-5.39606982253864],
    [7646,0.999825856682956,1.07567990703428,2.69203780363157,-6.11045686026932],
    [7648,0.999683185068283,1.08413910306416,2.21509301346804,-4.51944823232317],
    [7654,0.999905536994177,1.08203509308549,2.29646054292931,-5.43099585137085],
    [7658,1.00730244866095,27.745034992821,2.10650620791246,-4.7503650342713],
    [7711,0.999703784317797,1.0192647189629,2.30346875000001,-5.0156183411496],
    [7733,0.999621260766008,86.8884098293953,2.37877023208272,-4.85330536939915],
]

#   補正プログラム（ここから下は変更しないでください）
def getCorrectionData(fData):
    # IDの下4桁を抜き出し
    fid = fData.fids % 10000
    for lid in CorrectionList:
        if lid[0] == fid:
            # CO2
            if lid[1] != 0:
                fData.fco2 = int((fData.fco2 - lid[2]) / lid[1])
            # TEMP
            fData.ftmp = round(fData.ftmp - lid[3], 1)      # 偶数への丸めであることに注意
            # HUM
            fData.fhum = round(fData.fhum - lid[4], 1)      # 偶数への丸めであることに注意
            return


# for Debug
# if __name__ == '__main__':
